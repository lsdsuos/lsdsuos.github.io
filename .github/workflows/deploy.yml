name: Set-up GitHub Pages

on:
  push:
    branches:
      - main  # main ë¸Œëœì¹˜ì— Pushí•  ë•Œ ì‹¤í–‰ë¨

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: âœ… Checkout Repository
        uses: actions/checkout@v3

      - name: ğŸ”‘ Create .env File
        run: |
          echo "REACT_APP_SHEETS_ID=${{ secrets.SHEETS_ID }}" > .env
          echo "REACT_APP_SHEETS_API_KEY=${{ secrets.SHEETS_API_KEY }}" >> .env
          echo "âœ… .env íŒŒì¼ ìƒì„± ì™„ë£Œ!"
          ls -la  # í˜„ì¬ ë””ë ‰í† ë¦¬ì— íŒŒì¼ì´ ì •ìƒì ìœ¼ë¡œ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
          cat .env  # .env ë‚´ìš© í™•ì¸ (ë³´ì•ˆìƒ GitHubì—ì„œëŠ” ***ë¡œ í‘œì‹œë¨)

      - name: ğŸš¨ Check if .env exists
        run: |
          if [ ! -f .env ]; then
            echo "âŒ .env íŒŒì¼ì´ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤."
            exit 1
          else
            echo "âœ… .env íŒŒì¼ì´ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤."
          fi

      - name: ğŸ—‚ Save .env as Artifact (Downloadable)
        uses: actions/upload-artifact@v4
        with:
          name: env-file
          path: ./  # ğŸ”¥ í˜„ì¬ ë””ë ‰í† ë¦¬ì—ì„œ `.env` íŒŒì¼ì„ ì°¾ìŒ
          if-no-files-found: warn  # â— íŒŒì¼ì´ ì—†ìœ¼ë©´ ê²½ê³  ì¶œë ¥
          include-hidd
